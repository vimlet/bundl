<template>
    <div class="app-loading-wrapper app-loading-opacity-none" eon-ref="wrapper">
        <div class="app-loading-animation app-loading-dots app-loading-display-none" eon-ref="dots">
            <div class="app-loading-loading-dots--dot"></div>
            <div class="app-loading-loading-dots--dot"></div>
            <div class="app-loading-loading-dots--dot"></div>
        </div>
        <div class="app-loading-animation app-loading-circle app-loading-display-none" eon-ref="circle">
            <div class="app-loading-circle-loader"></div>
        </div>
        <div class="app-loading-animation app-loading-eon app-loading-display-none" eon-ref="eon"><svg
                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 935.6 1080.2">
                <style>
                    @keyframes app-loading-eon-scale {

                        0%,
                        50% {
                            transform: scale(1);
                            -webkit-transform: scale(1)
                        }

                        75% {
                            transform: scale(1.12);
                            -webkit-transform: scale(1.12)
                        }

                        to {
                            transform: scale(1.05);
                            -webkit-transform: scale(1.05)
                        }
                    }

                    @keyframes app-loading-eon-light {

                        0%,
                        50%,
                        to {
                            opacity: 0
                        }

                        75% {
                            opacity: 1
                        }
                    }

                    .app-loading-eon-msk0 {
                        fill: #2d2d2d
                    }

                    .app-loading-eon-msk1 {
                        fill: #494949
                    }

                    .app-loading-eon-msk2 {
                        fill: #141414
                    }

                    .app-loading-eon-msk3 {
                        fill: #333
                    }
                </style>
                <path id="back" d="M935.6 270L467.6 0 0 270v540l467.6 270 468-270z" class="app-loading-eon-msk0" />
                <g id="corners">
                    <path d="M758.3 708l-78.6-45.7-212.1 122.8-212.2-122.8-78.1 45.2 290.3 167.9z"
                        class="app-loading-eon-msk1" />
                    <path d="M255.4 417.5L467.6 295v-90.4L177.3 372.4v335.1l78.1-45.2z" class="app-loading-eon-msk2" />
                    <path d="M679.7 417.7v244.6l78.6 45.7V372.6l-290.7-168V295z" class="app-loading-eon-msk3" />
                </g>
                <g id="shell"
                    style="animation:app-loading-eon-scale 1s ease-in-out infinite alternate;-webkit-animation:app-loading-eon-scale 1s ease-in-out infinite alternate;transform-origin:center">
                    <path fill="#2d9196" d="M467.6 295L255.4 417.5v244.8l212.2 122.8 212.1-122.8V417.7z" />
                    <path fill="#399999" d="M679.7 662.3V417.7L467.6 540v245.1z" />
                    <path fill="#34e5f7" d="M467.6 540L255.4 417.5 467.6 295l212.1 122.7z" />
                    <path fill="#42bfcc" d="M467.6 785.1L255.4 662.3V417.5L467.6 540z" />
                </g>
                <g id="white"
                    style="animation:app-loading-eon-light 1s ease-in-out infinite alternate;-webkit-animation:app-loading-eon-light 1s ease-in-out infinite alternate">
                    <path id="white" fill="#fff" d="M467.6 204.6L177.2 372.3v335.1l290.4 168 290.3-168V372.7z"
                        opacity=".16" />
                </g>
                <g id="front">
                    <path
                        d="M467.6 0L0 270v540l467.6 270 468-270V270L467.6 0zm290.7 708L467.6 875.4 177.3 707.5V462.9l290.2 167.5 78.6-45.2v-90.4L255.4 327.3l212.1-122.6 290.7 167.9V708z"
                        class="app-loading-eon-msk0" />
                    <path d="M758.3 372.6V708L467.6 875.4V1080l468-270V270z" class="app-loading-eon-msk2" />
                    <path d="M467.6 630.3V540L0 270v540l467.6 270V875.4L177.3 707.5V462.9z"
                        class="app-loading-eon-msk3" />
                    <path d="M546.1 585.2v-90.5L467.6 540v90.3z" class="app-loading-eon-msk2" />
                    <path d="M758.3 372.6L935.6 270 467.6 0 0 270l467.6 270 78.5-45.3-290.7-167.4 212.2-122.7z"
                        class="app-loading-eon-msk1" />
                </g>
                <g id="cover">
                    <path d="M546.1 585.2v-90.5L467.6 540v90.3z" class="app-loading-eon-msk2" />
                    <path d="M177.3 372.6L467.6 540l78.5-45.3-290.7-167.4z" class="app-loading-eon-msk1" />
                    <path d="M177.3 372.6V463l290.3 167.3V540z" class="app-loading-eon-msk3" />
                    <path fill="#444" d="M546.1 494.7L255.4 327.3l-78.1 45.3 78.1-45.3 290.7 167.4z" />
                </g>
            </svg>
        </div>
    </div>
</template>

<script>
    eon.element({
        name: "app-loading",
        style: "app-loading.css",

        properties: {
            // @html-attribute type (public) [Animation to show: "dots", "circle", "eon"]
            type: {
                value: "dots",
                reflect: true
            },
            // @html-attribute autoStart (public) [Auto start loading. Default true]
            autoStart: {
                value: "true"
            }
        },

        privateProperties: {
            refs: {
                value: {}
            },
            misc: {
                value: {}
            }
        },

        functions: {
            // @function show (public) [Shows animation]
            show: function () {
                var el = this;
                el._refs.wrapper.classList.remove("app-loading-opacity-none");
            },
            // @function hide (public) [Hides animation]
            hide: function () {
                var el = this;
                el._refs.wrapper.classList.add("app-loading-opacity-none");
            }
        },

        privateFunctions: {
            // @function _init (private)
            init: function () {
                var el = this;
                el._setUp();
            },
            // @function _setUp (private)
            setUp: function (value) {
                var el = this;
                if (eon.util.isTrue(el.autoStart)) {
                    el.show();
                }
                el._setType(el.type);
            },
            // @function _setType (private) [Set up animation for selected type] 
            setType: function (type) {
                var el = this;
                el._refs.dots.classList.add("app-loading-display-none");
                el._refs.circle.classList.add("app-loading-display-none");
                el._refs.eon.classList.add("app-loading-display-none");
                switch (type) {
                    case "dots":
                        el._refs.dots.classList.remove("app-loading-display-none");
                        break;
                    case "circle":
                        el._refs.circle.classList.remove("app-loading-display-none");
                        break;
                    case "eon":
                        el._refs.eon.classList.remove("app-loading-display-none");
                        break;
                    default:
                        el._refs.dots.classList.remove("app-loading-display-none");
                        break;
                }
            }
        },

        onRender: function () {
            var el = this;
            el._init();
        },

        onPropertyChanged: function (attrName, oldVal, newVal) {
            switch (attrName) {
                case "type":
                    this._setType(newVal);
                    break;
            }
        }

    });
</script>