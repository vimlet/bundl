{"version":3,"file":"digdugEnvironments.js","sourceRoot":"","sources":["../../../src/bin/digdugEnvironments.ts"],"names":[],"mappings":";;;AAEA,uBAAyB;AACzB,2BAA6B;AAI7B,IAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;AAE3C,IAAM,OAAO,GAAG,EAAE;KACf,WAAW,CAAC,UAAU,CAAC;KACvB,MAAM,CAAC,UAAS,IAAI;IACnB,OAAO,CACL,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC;QAChC,IAAI,KAAK,eAAe;QACxB,IAAI,KAAK,WAAW;QACpB,IAAI,KAAK,mBAAmB,CAC7B,CAAC;AACJ,CAAC,CAAC;KACD,GAAG,CAAC,UAAS,IAAI;IAChB,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AACxC,CAAC,CAAC,CAAC;AAEL,IAAI,OAAO,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;IAC7B,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;IAC1C,OAAO,CAAC,GAAG,EAAE,CAAC;IACd,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;IAClC,OAAO,CAAC,OAAO,CAAC,UAAS,MAAM;QAC7B,OAAO,CAAC,GAAG,CAAC,IAAI,GAAG,MAAM,CAAC,CAAC;IAC7B,CAAC,CAAC,CAAC;IACH,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;CACjB;AAED,IAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAEnC,IAAI,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE;IACtC,OAAO,CAAC,GAAG,CAAC,UAAU,GAAG,8BAA8B,CAAC,CAAC;IACzD,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;CACjB;AAED,IAAM,UAAU,GAAkB,OAAO,CAAC,KAAK,GAAG,UAAU,CAAC,CAAC,OAAO,CAAC;AACtE,IAAM,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;AAChC,MAAM;KACH,eAAe,EAAE;KACjB,IAAI,CAAC,UAAS,YAAY;IACzB,YAAY,CAAC,OAAO,CAAC,UAAS,WAAW;QACvC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;KACD,KAAK,CAAC,UAAS,KAAK;IACnB,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;AACvB,CAAC,CAAC,CAAC","sourcesContent":["#!/usr/bin/env node\n\nimport * as fs from 'fs';\nimport * as path from 'path';\n\nimport Tunnel from '../Tunnel';\n\nconst digdugPath = path.dirname(__dirname);\n\nconst tunnels = fs\n  .readdirSync(digdugPath)\n  .filter(function(name) {\n    return (\n      /[A-Z]\\w+Tunnel\\.js$/.test(name) &&\n      name !== 'NullTunnel.js' &&\n      name !== 'Tunnel.js' &&\n      name !== 'SeleniumTunnel.js'\n    );\n  })\n  .map(function(name) {\n    return name.slice(0, name.length - 3);\n  });\n\nif (process.argv.length !== 3) {\n  console.log('usage: environments TUNNEL');\n  console.log();\n  console.log('Available tunnels:');\n  tunnels.forEach(function(tunnel) {\n    console.log('  ' + tunnel);\n  });\n  process.exit(1);\n}\n\nconst tunnelName = process.argv[2];\n\nif (tunnels.indexOf(tunnelName) === -1) {\n  console.log(tunnelName + ' is not a valid tunnel class');\n  process.exit(1);\n}\n\nconst TunnelCtor: typeof Tunnel = require('../' + tunnelName).default;\nconst tunnel = new TunnelCtor();\ntunnel\n  .getEnvironments()\n  .then(function(environments) {\n    environments.forEach(function(environment) {\n      console.log(JSON.stringify(environment.intern));\n    });\n  })\n  .catch(function(error) {\n    console.error(error);\n  });\n"]}