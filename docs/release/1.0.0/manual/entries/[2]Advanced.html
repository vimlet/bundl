<app-doc-viewer-templates-article links="Configuration,Plugins,Query Params,Copy,Templating,Watch,Order,Exec" script="">
    <eon-scroll thickness="8">
        <div class="app-doc-viewer-templates-article-content app-doc-content-width" eon-ref="content">
            <div></div><div><div class="app-md-viewer-t app-md-viewer-t1" id="Configuration">Configuration</div></div><div><div class="app-md-viewer-t2 app-md-viewer-t">Configuration File<div class="app-md-viewer-br"></div></div></div><div>The configuration file is a javascript file that exports a configuration object.</div><div>Since its a normal NodeJS javascript file you can use all its API features including:<div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-unordered"><div class="app-md-viewer-unordered-dot"></div><div class="app-md-viewer-unordered-text">imports</div></div></div><div><div class="app-md-viewer-unordered"><div class="app-md-viewer-unordered-dot"></div><div class="app-md-viewer-unordered-text">dependencies</div></div></div><div><div class="app-md-viewer-unordered"><div class="app-md-viewer-unordered-dot"></div><div class="app-md-viewer-unordered-text">variables</div></div></div><div><div class="app-md-viewer-unordered"><div class="app-md-viewer-unordered-dot"></div><div class="app-md-viewer-unordered-text">functions</div></div></div><div><div class="app-md-viewer-unordered"><div class="app-md-viewer-unordered-dot"></div><div class="app-md-viewer-unordered-text">comments</div></div></div><div><div class="app-md-viewer-unordered"><div class="app-md-viewer-unordered-dot"></div><div class="app-md-viewer-unordered-text">etc<div class="app-md-viewer-br"></div></div></div></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>module.exports = {
  //...
};</code></app-code></div></div><div><div class="app-md-viewer-t2 app-md-viewer-t">Configuration Object<div class="app-md-viewer-br"></div></div></div><div><div class="app-md-viewer-t3 app-md-viewer-t">Configuration Properties<div class="app-md-viewer-br"></div></div></div><div><app-table columntitle="Property,Description"><eon-row><eon-cell><strong>outputBase</strong></eon-cell><eon-cell>Generated files will be all within this directory, they will be nested inside following their input path.</eon-cell></eon-row><eon-row><eon-cell><strong>inputBase</strong></eon-cell><eon-cell>Files will be looking for from this directory.</eon-cell></eon-row><eon-row><eon-cell><strong>log</strong></eon-cell><eon-cell>If set to false, hides verbose output.</eon-cell></eon-row><eon-row><eon-cell><strong>watch</strong></eon-cell><eon-cell>Path to a folder to keep looking for changes.</eon-cell></eon-row><eon-row><eon-cell><strong>clean</strong></eon-cell><eon-cell>If set to true, outputBase will be empty before start packing.</eon-cell></eon-row><eon-row><eon-cell><strong>output</strong></eon-cell><eon-cell>The output object, contains the output paths as keys with input patterns or objects as values.</eon-cell></eon-row></app-table></div><div><em>Example:</em></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>module.exports = {
  &quot;outputBase&quot;: &quot;build&quot;,
  &quot;inputBase&quot;: &quot;src&quot;,
  &quot;watch&quot;: &quot;src&quot;,
  &quot;clean&quot;: true,
  &quot;output&quot;: {
    &quot;bundle.js&quot;: &quot;js/**.js&quot;
  }
};</code></app-code></div><div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-t2 app-md-viewer-t">Output Object<div class="app-md-viewer-br"></div></div></div><div>The output paths are presented as the keys of this object. If global outputBase property is present, it will be added at the start of each output path key.</div><div>The output path key can hold several value formats.<div class="app-md-viewer-br"></div></div><div><strong>Simple string:</strong> Path to single input file.</div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>&quot;output/subfolder&quot;: &quot;input.txt&quot;</code></app-code></div><div class="app-md-viewer-br"></div></div><div><strong>Object:</strong> A configuration object for given output.</div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>&quot;output/subfolder&quot;: {input:&quot;input.txt&quot;, ...}</code></app-code></div><div class="app-md-viewer-br"></div></div><div><strong>Array:</strong> Can contain both string and object.</div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>&quot;output/subfolder&quot;: [{input:&quot;input1.txt&quot;, ...},&quot;input2.txt&quot;]</code></app-code></div><div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-t3 app-md-viewer-t">Configuration Properties<div class="app-md-viewer-br"></div></div></div><div><app-table columntitle="Property,Description"><eon-row><eon-cell><strong>parse</strong></eon-cell><eon-cell>Enable [Meta](https://github.com/vimlet/vimlet-meta) template syntax parsing.</eon-cell></eon-row><eon-row><eon-cell><strong>order</strong></eon-cell><eon-cell>Specify an order and make it works synchronously with other ordered entries. Non-ordered keys will be processed at the end in asynchronous way.</eon-cell></eon-row><eon-row><eon-cell><strong>id</strong></eon-cell><eon-cell>Identification for hashes and other parse functions.</eon-cell></eon-row><eon-row><eon-cell><strong>use</strong></eon-cell><eon-cell>`function(entry){return entry;}` Use custom code to modify the output.</eon-cell></eon-row><eon-row><eon-cell><strong>input</strong></eon-cell><eon-cell>A string or a configuration object for the input files.</eon-cell></eon-row></app-table></div><div><em>Example:</em></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>&quot;output&quot;: {
  &quot;outputfile.ext&quot;: {
    &quot;clean&quot;: true,
    &quot;order&quot;: 0,
    &quot;id&quot;: &quot;example&quot;,
    &quot;input&quot;: &quot;inputfile.ext&quot;
  }
}</code></app-code></div><div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-t3 app-md-viewer-t">Hash Interpolation<div class="app-md-viewer-br"></div></div></div><div>You can interpolate a shortened file hash as part of the output path key with <code class="app-md-viewer-code">{{hash}}</code>, this will be inserted as a part of the key. </div><div>This is useful for tracking changes or busting caches, since the hash will change when any input file for a given output is modified</div><div>When <code class="app-md-viewer-code">&quot;parse&quot;: true</code>, it's recommend to add an <code class="app-md-viewer-code">id</code> property, so you can retrieve the name using <code class="app-md-viewer-code">&lt;%= hash(id); %&gt;</code><div class="app-md-viewer-br"></div></div><div><em>Example:</em></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>&quot;output&quot;: {
  &quot;bundle.{{hash}}.js&quot;: {
    &quot;id&quot;: &quot;bundle.js&quot;,
    //...
  }
}</code></app-code></div><div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-t2 app-md-viewer-t">Input Object<div class="app-md-viewer-br"></div></div></div><div>When an input configuration object is used, it's keys are the file paths to use as input for the output.</div><div><code class="app-md-viewer-code">*</code> and <code class="app-md-viewer-code">**</code> patterns can be used to target multiple files. If the path starts with <code class="app-md-viewer-code">!</code> it will exclude that pattern.<div class="app-md-viewer-br"></div></div><div>If a global inputBase property is specified, it will be added at the start of each path key.<div class="app-md-viewer-br"></div></div><div><em>Important:</em></div><div><span class="app-md-viewer-quote"></span>Input paths that match a given pattern, will be added in alphabetical order<div class="app-md-viewer-br"></div></div><div>The content can be a boolean true just to mark the file as required.</div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>&quot;input&quot;:{
  &quot;inputfile.ext&quot;: true
}</code></app-code></div><div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-t3 app-md-viewer-t">Configuration Properties<div class="app-md-viewer-br"></div></div></div><div>You can also provide configuration object that can be used with the following parameters:<div class="app-md-viewer-br"></div></div><div><app-table columntitle="Property,Description"><eon-row><eon-cell><strong>parse</strong></eon-cell><eon-cell>Run meta for given key.</eon-cell></eon-row><eon-row><eon-cell><strong>use</strong></eon-cell><eon-cell>`function(entry){return entry;}` Use custom code to modify the input.</eon-cell></eon-row><eon-row><eon-cell><strong>read</strong></eon-cell><eon-cell>If set to false, file content will not be read. Useful when reading it by other means in `use` function.</eon-cell></eon-row></app-table></div><div><em>Example:</em></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>&quot;input&quot;: {
  &quot;file.*&quot;: true,
  &quot;!file.html&quot;: true
}</code></app-code></div><div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-t2 app-md-viewer-t">Use Function<div class="app-md-viewer-br"></div></div></div><div>A function or an array of functions, which allow the user to modify the content and the filename.<div class="app-md-viewer-br"></div></div><div>Use can be used either at output object or at input object. The function has the same syntax but some differences.<div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>use: function(entry){
  // Do something
  return entry;
}</code></app-code></div><div class="app-md-viewer-br"></div></div><div>The function has one parameter, entry. And it must return it again.<div class="app-md-viewer-br"></div></div><div><strong>When used in output object:</strong></div><div>Entry is an object with the following keys:<div class="app-md-viewer-br"></div></div><div><app-table columntitle="Property,Description"><eon-row><eon-cell><strong>path</strong></eon-cell><eon-cell>The input path relative to the current working directory.</eon-cell></eon-row><eon-row><eon-cell><strong>content</strong></eon-cell><eon-cell>Content of the output file.</eon-cell></eon-row></app-table></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>&quot;use&quot;:function (entry) {
  entry.fileName = entry.fileName.replace(&quot;.less&quot;, &quot;.css&quot;);
  entry.content += &quot;\nconsole.log(\&quot;output use\&quot;);&quot;;
  return entry;
}</code></app-code></div><div class="app-md-viewer-br"></div></div><div><strong>When used in input object:</strong></div><div>Entry is an object with the following keys:<div class="app-md-viewer-br"></div></div><div><app-table columntitle="Property,Description"><eon-row><eon-cell><strong>path</strong></eon-cell><eon-cell>The input path relative to the current working directory.</eon-cell></eon-row><eon-row><eon-cell><strong>content</strong></eon-cell><eon-cell> Content of the input file.</eon-cell></eon-row></app-table></div><div>When a pattern like <code class="app-md-viewer-code">src/**.js</code> is used, you get to additional properties:<div class="app-md-viewer-br"></div></div><div><app-table columntitle="Property,Description"><eon-row><eon-cell><strong>match</strong></eon-cell><eon-cell>When pattern used, is the file that matched the pattern.</eon-cell></eon-row><eon-row><eon-cell><strong>pattern</strong></eon-cell><eon-cell> When pattern used, is the pattern that matched the file.</eon-cell></eon-row></app-table></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>&quot;use&quot;:function (entry) {
  entry.fileName = entry.fileName.replace(&quot;.less&quot;, &quot;.css&quot;);
  entry.content += &quot;\nconsole.log(\&quot;output use\&quot;);&quot;;
  return entry;
}</code></app-code></div><div class="app-md-viewer-br"></div></div><div><span class="app-md-viewer-quote"></span>It is important to know that input use will be done before output use.</div><div><span class="app-md-viewer-quote"></span>Use allows async functions with await.<div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>&quot;use&quot;: async function (entry) {
  entry.content = await doSomething(entry.content);
  return entry;
}</code></app-code></div><div class="app-md-viewer-br"></div></div><div><em>There are some other properties at entry object such as pattern for input, they can be useful but their modification will not be taken in the bundle process.</em><div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-t3 app-md-viewer-t">Third party modules with use<div class="app-md-viewer-br"></div></div></div><div>This example shows how you can add <code class="app-md-viewer-code">use</code> to process files with external dependencies.<div class="app-md-viewer-br"></div></div><div><em>Example:</em><div class="app-md-viewer-br"></div></div><div>Processing <code class="app-md-viewer-code">.less</code> files using npm dependency <code class="app-md-viewer-code">less</code>.<div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>&quot;input&quot;: {
  &quot;less/**.less&quot;: {
    &quot;use&quot;: async function (entry) {
      try {
          entry.fileName = entry.fileName.replace(&quot;.less&quot;, &quot;.css&quot;);
          entry.content = (await require(&quot;less&quot;).render(entry.content.toString(&quot;utf8&quot;), {
          filename: require(&quot;path&quot;).resolve(entry.file),
          })).css;
        } catch (error) {
          console.log(error);
        }
        return entry;
      }
    }
  }</code></app-code></div><div class="app-md-viewer-br"></div></div><div><em>Note:</em></div><div><span class="app-md-viewer-quote"></span>Check examples and plugins for a better understanding on how all this options interact together.<div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-t app-md-viewer-t1" id="Plugins">Plugins</div></div><div>Bundl can easily be extended with your own code but it also has an official GitHub plugin repository <a href="https://github.com/vimlet/bundl-plugins" title="">https://github.com/vimlet/bundl-plugins</a> with plugins for most of the common tools out there.<div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>module.exports = {
  &quot;output&quot;: {
    &quot;build/bundle.js&quot;: {
      &quot;use&quot;: [
        // Plugins
        require(&quot;@bundl/plugin1&quot;),
        require(&quot;@bundl/plugin2&quot;),
        require(&quot;@bundl/plugin3&quot;)
      ],
      &quot;input&quot;: &quot;src/**.js&quot;
    }
  }
};</code></app-code></div><div class="app-md-viewer-br"></div></div><div>All official plugins can be found under the NPM organization @bundl.<div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-t app-md-viewer-t1" id="Query Params">Query Params</div></div><div>Output keys allow output options to be passed as query params, following the same syntax as HTML query params, in order to simplify some scenarios.<div class="app-md-viewer-br"></div></div><div><code class="app-md-viewer-code">path?key1=value1&amp;key2?value2</code><div class="app-md-viewer-br"></div></div><div><em>Example:</em></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>&quot;index.html?parse=true&quot;:&quot;html/index.html&quot;</code></app-code></div><div class="app-md-viewer-br"></div></div><div>is the same as:<div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>&quot;index.html&quot;: {
  &quot;parse&quot;: true,
  &quot;input&quot;: {
    &quot;html/index.html&quot;: true
  }
}</code></app-code></div><div class="app-md-viewer-br"></div></div><div>If an object key has the same property as the one provided by the query params, it will have priority over the query param value.<div class="app-md-viewer-br"></div></div><div><em>Example:</em></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>&quot;index.html?parse=true&quot;: {
  &quot;input&quot;: &quot;html/index.html&quot;
}</code></app-code></div><div class="app-md-viewer-br"></div></div><div>is the same as:<div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-code-container"><app-code language="null"><code>&quot;index.html&quot;: {
  &quot;parse&quot;: true,
  input: {
    &quot;html/index.html&quot;: true
  }
}</code></app-code></div><div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-t app-md-viewer-t1" id="Copy">Copy</div></div><div>If any output key ends with **, it will be interpreted as <code class="app-md-viewer-code">copy</code> task, and all the input files will be copied to that output path.<div class="app-md-viewer-br"></div></div><div><em>Example:</em></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>&quot;copy/**&quot;: {
  &quot;input&quot;: {
    &quot;input/**&quot;: true
  }
}</code></app-code></div></div><div>All files inside <code class="app-md-viewer-code">input/**</code> will be copied to <code class="app-md-viewer-code">copy</code> following the same structure that they had.<div class="app-md-viewer-br"></div><div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-t app-md-viewer-t1" id="Templating">Templating</div></div><div><a href="https://github.com/vimlet/vimlet-meta" title="">Vimlet meta templating engine</a> is built in bundl. <div class="app-md-viewer-br"></div></div><div>If <code class="app-md-viewer-code">&quot;parse&quot;: true</code> meta template engine will parse the file content.<div class="app-md-viewer-br"></div></div><div>Meta template engine is used to generate files from templates that allow the use of JavaScript and NodeJS API.<div class="app-md-viewer-br"></div></div><div><em>Example:</em><div class="app-md-viewer-br"></div></div><div>Join files with meta:<div class="app-md-viewer-br"></div></div><div>Template1:</div><div><div class="app-md-viewer-code-container"><app-code language="null"><code>Hello I&apos;m a template &lt;%template(template2)%&gt;</code></app-code></div><div class="app-md-viewer-br"></div></div><div>Template2:</div><div><div class="app-md-viewer-code-container"><app-code language="null"><code>I&apos;m another template</code></app-code></div><div class="app-md-viewer-br"></div></div><div>Result:</div><div><div class="app-md-viewer-code-container"><app-code language="null"><code>Hello I&apos;m a template I&apos;m another template</code></app-code></div><div class="app-md-viewer-br"></div><div class="app-md-viewer-br"></div></div><div>Template logic with meta:<div class="app-md-viewer-br"></div></div><div>Template:</div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>Hello I&apos;m a template
&lt;%
for(var i = 0; i &lt; 5; i++){
  echo(i);
}
%&gt;</code></app-code></div></div><div>Result:</div><div><div class="app-md-viewer-code-container"><app-code language="null"><code>Hello I&apos;m a template 01234</code></app-code></div><div class="app-md-viewer-br"></div></div><div>If you need more information regarding meta please visit <a href="https://github.com/vimlet/vimlet-meta" title="">https://github.com/vimlet/vimlet-meta</a>.<div class="app-md-viewer-br"></div><div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-t app-md-viewer-t1" id="Watch">Watch</div></div><div>Bundl has the ability to keep track for changes on input files and output again the necessary files without the need to manually run bundl each time.<div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-code-container"><app-code language="null"><code>bundl -w &quot;path_to_folder&quot;</code></app-code></div><div class="app-md-viewer-br"></div></div><div>This will enable watch mode. If any file under watch directory that matches an input are modified, bundl will run again for those outputs.<div class="app-md-viewer-br"></div></div><div>It can also be configured at <code class="app-md-viewer-code">bundl.config.js</code> even using array for multiple directories:<div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>module.exports = {
  &quot;watch&quot;: [&quot;src&quot;, &quot;doc&quot;],
  &quot;output&quot;: {
    //...
  }
};</code></app-code></div><div class="app-md-viewer-br"></div></div><div>If watch property is added to an input object and watch mode is globally enabled, it will watch the given path for that input instead of the input key.<div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-t app-md-viewer-t1" id="Order">Order</div></div><div>An <code class="app-md-viewer-code">order</code> property can be added to both output and input objects, to determine the order of how files will be processed. In this way we can force a synchronous behaviour with other ordered entries. Non-ordered keys will be processed at the end in asynchronous way.<div class="app-md-viewer-br"></div></div><div><em>Example:</em></div><div><div class="app-md-viewer-code-container"><app-code language="javascript"><code>&quot;output&quot;: {
  &quot;outputfile1.ext&quot;: {
    &quot;clean&quot;: true,
    &quot;order&quot;: 0,
    &quot;id&quot;: &quot;example&quot;,
    &quot;input&quot;: &quot;inputfile1.ext&quot;
  },
  &quot;outputfile2ext&quot;: {
    &quot;clean&quot;: true,
    &quot;order&quot;: 1,
    &quot;id&quot;: &quot;example&quot;,
    &quot;input&quot;: &quot;inputfile2.ext&quot;
  }
}</code></app-code></div><div class="app-md-viewer-br"></div></div><div><div class="app-md-viewer-t app-md-viewer-t1" id="Exec">Exec</div></div><div><em>Coming soon...</em><div class="app-md-viewer-br"></div></div>
            <div class="app-doc-viewer-templates-article-content-bottom"></div>
        </div>
    </eon-scroll>
    <app-go-top></app-go-top>
</app-doc-viewer-templates-article>