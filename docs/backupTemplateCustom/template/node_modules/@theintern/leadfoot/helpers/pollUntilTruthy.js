"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var pollUntil_1 = require("./pollUntil");
var util_1 = require("../lib/util");
function pollUntilTruthy(poller, argsOrTimeout, timeout, pollInterval) {
    var args = [];
    if (typeof argsOrTimeout === 'number') {
        pollInterval = timeout;
        timeout = argsOrTimeout;
    }
    else if (argsOrTimeout) {
        args.push.apply(args, argsOrTimeout);
    }
    args.unshift(util_1.toExecuteString(poller));
    var _poller = /* istanbul ignore next */ function (poller) {
        var args = Array.prototype.slice.apply(arguments).slice(1);
        var result = new Function(poller).apply(null, args);
        // If result is truthy, return it. Otherwise return `undefined`, which
        // will cause pollUntil to continue polling.
        return result ? result : undefined;
    };
    return pollUntil_1.default(util_1.toExecuteString(_poller), args, timeout, pollInterval);
}
exports.default = pollUntilTruthy;
//# sourceMappingURL=pollUntilTruthy.js.map